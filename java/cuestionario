document.getElementById('form-cuestionario').addEventListener('submit', function(event) {
    event.preventDefault();

    let isValid = true;

    const pregunta1 = document.getElementById('pregunta1').value;
    if (!pregunta1) {
        isValid = false;
        document.getElementById('error-pregunta1').classList.remove('hidden');
    } else {
        document.getElementById('error-pregunta1').classList.add('hidden');
    }

    const pregunta2 = document.querySelector('input[name="pregunta2"]:checked');
    if (!pregunta2) {
        isValid = false;
        document.getElementById('error-pregunta2').classList.remove('hidden');
    } else {
        document.getElementById('error-pregunta2').classList.add('hidden');
    }

    const pregunta3 = document.getElementById('pregunta3').value;
    if (!pregunta3) {
        isValid = false;
        document.getElementById('error-pregunta3').classList.remove('hidden');
    } else {
        document.getElementById('error-pregunta3').classList.add('hidden');
    }

    const pregunta4 = document.querySelectorAll('input[name="pregunta4"]:checked');
    if (pregunta4.length === 0) {
        isValid = false;
        document.getElementById('error-pregunta4').classList.remove('hidden');
    } else {
        document.getElementById('error-pregunta4').classList.add('hidden');
    }

    if (isValid) {
        const resultadoTexto = evaluarCuestionario(pregunta1, pregunta2.value, pregunta3, pregunta4);
        document.getElementById('form-cuestionario').classList.add('hidden');
        document.getElementById('resultado-texto').innerText = resultadoTexto;
        document.getElementById('resultado').classList.remove('hidden');
    }
});

function evaluarCuestionario(pregunta1, pregunta2, pregunta3, pregunta4) {
    let puntaje = 0;

    if (pregunta1.toLowerCase() === 'marte') puntaje += 2;
    if (pregunta2 === 'Verdadero') puntaje += 2;
    if (pregunta3 === 'opcion2') puntaje += 2;

    if (pregunta4.length > 1) puntaje += 2;

    if (pregunta4.length === 2 && Array.from(pregunta4).every(option => option.value === 'Opción 1' || option.value === 'Opción 3')) {
        puntaje += 2;
    }

    if (puntaje < 5) {
        return 'Insuficiente';
    } else if (puntaje < 7) {
        return 'Regular';
    } else if (puntaje < 9) {
        return 'Buena';
    } else {
        return '¡Sobresaliente!';
    }
}